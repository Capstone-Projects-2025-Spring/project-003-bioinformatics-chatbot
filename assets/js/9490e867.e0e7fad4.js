"use strict";(self.webpackChunkcreate_project_docs=self.webpackChunkcreate_project_docs||[]).push([[8657],{64748:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>d,metadata:()=>l,toc:()=>t});var i=s(74848),r=s(28453);const d={sidebar_position:2},c="Backend API",l={id:"api-specification/Backend-API",title:"Backend-API",description:"Doucumentation of Backend API From Flask Server",source:"@site/docs/api-specification/Backend-API.md",sourceDirName:"api-specification",slug:"/api-specification/Backend-API",permalink:"/project-003-bioinformatics-chatbot/docs/api-specification/Backend-API",draft:!1,unlisted:!1,editUrl:"https://github.com/Capstone-Projects-2025-Spring/project-003-bioinformatics-chatbot/edit/main/documentation/docs/api-specification/Backend-API.md",tags:[],version:"current",lastUpdatedBy:"Amitai Goldmeer",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"docsSidebar",previous:{title:"Frontend-API",permalink:"/project-003-bioinformatics-chatbot/docs/api-specification/Frontend-API"},next:{title:"Test Procedures",permalink:"/project-003-bioinformatics-chatbot/docs/category/test-procedures"}},o={},t=[{value:"<code>GET /index</code>",id:"get-index",level:3},{value:"<code>GET/POST /admin</code>",id:"getpost-admin",level:3},{value:"<code>DELETE /delete/{item_id}</code>",id:"delete-deleteitem_id",level:3},{value:"<code>GET /download/{item_id}</code>",id:"get-downloaditem_id",level:3},{value:"<code>POST /chat</code>",id:"post-chat",level:3},{value:"<code>socket.on(&quot;chat&quot;)</code>",id:"socketonchat",level:3},{value:"<code>socket.on(&quot;cancel&quot;)</code>",id:"socketoncancel",level:3},{value:"<code>GET /change_password</code>",id:"get-change_password",level:3},{value:"<code>POST /change_password</code>",id:"post-change_password",level:3},{value:"<code>GET /logout</code>",id:"get-logout",level:3}];function a(e){const n={code:"code",h1:"h1",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components},{Details:s}=n;return s||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"backend-api",children:"Backend API"}),"\n",(0,i.jsx)(n.p,{children:"Doucumentation of Backend API From Flask Server"}),"\n",(0,i.jsx)(n.h3,{id:"get-index",children:(0,i.jsx)(n.code,{children:"GET /index"})}),"\n",(0,i.jsx)(s,{open:"True",children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Renders the index page."}),"\n",(0,i.jsxs)(n.li,{children:["Methods: ",(0,i.jsx)(n.code,{children:"GET"}),", ",(0,i.jsx)(n.code,{children:"POST"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Handles login form submission."}),"\n",(0,i.jsx)(n.li,{children:"Redirects to the admin page if credentials are correct."}),"\n",(0,i.jsx)(n.li,{children:"Displays an error message on failed login."}),"\n"]}),"\n"]}),"\n"]})}),"\n",(0,i.jsx)(n.h3,{id:"getpost-admin",children:(0,i.jsx)(n.code,{children:"GET/POST /admin"})}),"\n",(0,i.jsx)(s,{open:"true",children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Admin dashboard with document list UI and file upload functionality."}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Parameters:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"No URL parameters."}),"\n",(0,i.jsxs)(n.li,{children:["On ",(0,i.jsx)(n.code,{children:"POST"}),": Expects a form upload with a PDF file under the field name ",(0,i.jsx)(n.code,{children:"pdf_file"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Returns:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["On ",(0,i.jsx)(n.code,{children:"GET"}),": Renders the admin dashboard with a list of documents."]}),"\n",(0,i.jsxs)(n.li,{children:["On ",(0,i.jsx)(n.code,{children:"POST"})," success (valid PDF upload):","\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "message": "File \'{filename}\' uploaded successfully!",\n  "document": {\n    "id": document_id,\n    "name": document_name,\n    "type": document_type,\n    "size": file_size_in_bytes\n  }\n}\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["If no file is uploaded:","\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{ "error": "No file uploaded" }\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["If file type is invalid (not PDF):","\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{ "error": "Invalid file type. Only PDFs are allowed." }\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["If a document with the same name and type already exists:","\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{ "error": "A document named \'{filename}\' already exists." }\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["If form data is invalid:","\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{ "error": "Invalid form data. Please ensure all fields are filled correctly." }\n'})}),"\n"]}),"\n"]}),"\n"]}),"\n"]})}),"\n",(0,i.jsx)(n.h3,{id:"delete-deleteitem_id",children:(0,i.jsx)(n.code,{children:"DELETE /delete/{item_id}"})}),"\n",(0,i.jsx)(s,{open:"True",children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Deletes a document from the database."}),"\n",(0,i.jsxs)(n.li,{children:["Parameters: - ",(0,i.jsx)(n.code,{children:"item_id"})," (int): The ID of the document to delete."]}),"\n",(0,i.jsxs)(n.li,{children:["Returns:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["if deletion is successful: ",(0,i.jsx)(n.code,{children:'{ "success": true, "message": "Item {item_id} deleted successfully" }'})]}),"\n",(0,i.jsxs)(n.li,{children:["if an error occurs:  ",(0,i.jsx)(n.code,{children:'{ "success": false, "message": "Failed to delete item", "error": "error details" }'})]}),"\n"]}),"\n"]}),"\n"]})}),"\n",(0,i.jsx)(n.h3,{id:"get-downloaditem_id",children:(0,i.jsx)(n.code,{children:"GET /download/{item_id}"})}),"\n",(0,i.jsx)(s,{open:"true",children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Downloads a document from the database."}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Parameters:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"item_id"})," (int): The ID of the document to download."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Returns:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"If download is successful: The PDF file as a downloadable attachment."}),"\n",(0,i.jsxs)(n.li,{children:["If the document is not found: ",(0,i.jsx)(n.code,{children:'{ "success": false, "message": "Item {item_id} not found" }'})]}),"\n",(0,i.jsxs)(n.li,{children:["If an error occurs: ",(0,i.jsx)(n.code,{children:'{ "success": false, "message": "Failed to download document", "error": "error details" }'})]}),"\n"]}),"\n"]}),"\n"]})}),"\n",(0,i.jsx)(n.h3,{id:"post-chat",children:(0,i.jsx)(n.code,{children:"POST /chat"})}),"\n",(0,i.jsx)(s,{open:"True",children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Handles chat messages and retrieves relevant document information."}),"\n",(0,i.jsxs)(n.li,{children:["Methods: ",(0,i.jsx)(n.code,{children:"POST"})]}),"\n",(0,i.jsxs)(n.li,{children:["Parameters:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"message"})," (str): The user's input message."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"conversationHistory"})," (list): Previous messages in the conversation."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Functionality:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Queries the database for relevant documents based on user input. - Filters documents with a similarity score of \u2265 0.90. - Constructs a prompt using the retrieved documents and chat history. - Sends the formatted prompt to an LLM (",(0,i.jsx)(n.code,{children:"llama3.2"}),") for response generation."]}),"\n",(0,i.jsx)(n.li,{children:"Returns the LLM-generated response."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Returns:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["if successful: ",(0,i.jsx)(n.code,{children:'{ "response": "<LLM-generated response>" }'})]}),"\n",(0,i.jsxs)(n.li,{children:["if no relevant documents are found: ",(0,i.jsx)(n.code,{children:'{ "response": "No document found", "message": "No relevant information available." }'})]}),"\n",(0,i.jsxs)(n.li,{children:["if no message is provided: ",(0,i.jsx)(n.code,{children:'{ "error": "Message is required" }'})]}),"\n",(0,i.jsxs)(n.li,{children:["if no conversation history is provided: ",(0,i.jsx)(n.code,{children:'{ "error": "conversationHistory is required" }'})]}),"\n",(0,i.jsxs)(n.li,{children:["if an exception occurs: ",(0,i.jsx)(n.code,{children:'{ "error": "An error occurred: <error details>" }'})]}),"\n"]}),"\n"]}),"\n"]})}),"\n",(0,i.jsx)(n.h3,{id:"socketonchat",children:(0,i.jsx)(n.code,{children:'socket.on("chat")'})}),"\n",(0,i.jsx)(s,{open:"true",children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Handles incoming chat messages from the client, streams an AI-generated response based on retrieved documents."}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Parameters:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"data"})," (JSON object):","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"message"})," (string): The user's query."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"conversationHistory"})," (list of objects): Previous conversation history, with each object containing:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"sender"})," (string): Either ",(0,i.jsx)(n.code,{children:'"User"'})," or ",(0,i.jsx)(n.code,{children:'"Chatbot"'}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"text"})," (string): The message content."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Emits:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["On missing fields:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:'"error"'})," with ",(0,i.jsx)(n.code,{children:'{ "error": "Message is required" }'})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:'"error"'})," with ",(0,i.jsx)(n.code,{children:'{ "error": "conversationHistory is required" }'})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:'"error"'})," with ",(0,i.jsx)(n.code,{children:'{ "error": "doc_toggle is required" }'})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:'"error"'})," with ",(0,i.jsx)(n.code,{children:'{ "error": "stored_context is required" }'})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["If no documents found:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:'"chunk"'})," with ",(0,i.jsx)(n.code,{children:'{ "chunk": "No document found" }'})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:'"done"'})," with ",(0,i.jsx)(n.code,{children:'{ "status": "complete" }'})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["On success:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Streams ",(0,i.jsx)(n.code,{children:'"chunk"'})," events containing parts of the AI's generated markdown response."]}),"\n",(0,i.jsxs)(n.li,{children:["Emits ",(0,i.jsx)(n.code,{children:'"done"'})," event with ",(0,i.jsx)(n.code,{children:'{ "status": "complete" }'})," at the end."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["On error:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:'"error"'})," with ",(0,i.jsx)(n.code,{children:'{ "error": "error details" }'})]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]})}),"\n",(0,i.jsx)(n.h3,{id:"socketoncancel",children:(0,i.jsx)(n.code,{children:'socket.on("cancel")'})}),"\n",(0,i.jsx)(s,{open:"true",children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Cancels an ongoing chat session."}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Parameters:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"No additional parameters (uses session ID automatically)."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Effect:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Marks the current session as cancelled, stopping any ongoing response streaming."}),"\n"]}),"\n"]}),"\n"]})}),"\n",(0,i.jsx)(n.h3,{id:"get-change_password",children:(0,i.jsx)(n.code,{children:"GET /change_password"})}),"\n",(0,i.jsx)(s,{open:"true",children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Displays the change password form."}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Parameters:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"No parameters."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Returns:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Renders the ",(0,i.jsx)(n.code,{children:"changepassword.html"})," page containing the password change form."]}),"\n"]}),"\n"]}),"\n"]})}),"\n",(0,i.jsx)(n.h3,{id:"post-change_password",children:(0,i.jsx)(n.code,{children:"POST /change_password"})}),"\n",(0,i.jsx)(s,{open:"true",children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Handles password change request."}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Parameters:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Form data:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"current_password"})," (string): The user's current password."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"new_password"})," (string): The new password the user wants to set."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"confirm_password"})," (string): Confirmation of the new password."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Returns:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["On success: Redirects to the admin dashboard with a success message: ",(0,i.jsx)(n.code,{children:'"Password changed successfully."'})]}),"\n",(0,i.jsxs)(n.li,{children:["On missing fields:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Flash message: ",(0,i.jsx)(n.code,{children:'"Missing required fields."'})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["On password mismatch (new and confirm):","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Flash message: ",(0,i.jsx)(n.code,{children:'"New password and confirmation do not match."'})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["On incorrect current password:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Flash message: ",(0,i.jsx)(n.code,{children:'"Current password is incorrect."'})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["If the new password is the same as the current:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Flash message: ",(0,i.jsx)(n.code,{children:'"New password cannot be the same as the current password."'})]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"All errors redirect back to the password change form."}),"\n"]}),"\n"]}),"\n"]})}),"\n",(0,i.jsx)(n.h3,{id:"get-logout",children:(0,i.jsx)(n.code,{children:"GET /logout"})}),"\n",(0,i.jsx)(s,{open:"True",children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Logs the user out by redirecting to the login page."}),"\n",(0,i.jsxs)(n.li,{children:["Method: ",(0,i.jsx)(n.code,{children:"GET"})]}),"\n",(0,i.jsxs)(n.li,{children:["Returns:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Redirects to ",(0,i.jsx)(n.code,{children:"/index"})]}),"\n"]}),"\n"]}),"\n"]})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>l});var i=s(96540);const r={},d=i.createContext(r);function c(e){const n=i.useContext(d);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),i.createElement(d.Provider,{value:n},e.children)}}}]);